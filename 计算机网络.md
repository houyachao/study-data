# 计算机网络

![1. 网络模型png](C:\Users\Administrator\Desktop\笔记\java高并发 高性能知识\1. 网络模型png.png)

**上图过程：**

① 客户端发送一个请求，会先到应用层（http，https），在像服务端发送请求的时候。

②在传输层需要先建立3次握手链接，因为TCP是面向链接的，安全的，UDP 是面向非链接的。所以3次握手链接（三次握手 》 数据传输 》四次分手  成为一个最小粒度，不可被再分割）。假如 我做了负载，客户端发生一个请求，服务器端都三个Tomcat，则为了保证一次链接的成功，客户端的三次链接必须打倒一个服务器上，不然出现任何一个连接出错都是无效的。四次挥手也是保证，数据正常传输结束，假如客户端发送一个请求想要断开链接，服务器端收到这个连接需要到应用层去请求，应用层同意了会给客户端返回一个确认，服务器端会主动在发送一个断开的链接，客户端同意后会在给服务端回一个确认，确保全双工。

③建立完链接后，通过网络层（网络层主要是通过下一跳机制，下一跳机制是每个路由器保存了最近一次的目的地址） 通过访问的ip地址会去和子网掩码按位与运算，找到目的地址。例如，我们ping www.baidu.com 这个地址，会通过DNS 解析 找到ip地址，ip 地址会和本机的子网掩码去做按位与运算，默认的子网掩码0.0.0.0 和 220.181.38.150 按位与后，计算得到一个0.0.0.0地址 整好和目的地址匹配，找到对应的网关172.26.159.253 然后输出出去。

![2.网络层](C:\Users\Administrator\Desktop\笔记\java高并发 高性能知识\2.网络层.png)

④然后会通过数据链路层，上面找到的网关可以获得对应的mac 地址，Mac地址是节点间的，所以可以通过变化Mac地址的值来找到最终的服务器，因为ip地址是不会变化的。（链路层 会封装一个数据包，里面有3个地址，最外层是Mac 地址下一个跳点给谁，然后再往里层是这个目标的最终地址，再往里面一层是端口号）。

![3。数据链路层](C:\Users\Administrator\Desktop\笔记\java高并发 高性能知识\3。数据链路层.png)



![4.路由规则](C:\Users\Administrator\Desktop\笔记\java高并发 高性能知识\4.路由规则.png)































